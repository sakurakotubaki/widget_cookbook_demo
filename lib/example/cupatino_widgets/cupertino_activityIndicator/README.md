# iOSのローディングインジケーター（CupertinoActivityIndicator）
iOSのローディングインジケーター（CupertinoActivityIndicator）の一般的な使用例をいくつか実装してみましょう。よくあるケースとして：

1. API通信時のローディング
2. 画像の読み込み
3. ページ遷移時のローディング
4. プルトゥリフレッシュ

このサンプルでは、以下の一般的なローディングパターンを実装しています：

1. **APIリクエスト時のローディング**
- ボタン内にインジケーターを表示
- ボタンを無効化してダブルタップを防止
- データ取得完了後に結果を表示

2. **画像読み込み時のローディング**
- プレースホルダー領域にインジケーターを表示
- 読み込み完了後にアイコンを表示
- エラー時の代替表示

3. **ページ遷移時のローディング**
- 画面中央にインジケーターを表示
- データ読み込み完了後にコンテンツを表示
- プルトゥリフレッシュ機能

4. **プルトゥリフレッシュ**
- `CupertinoSliverRefreshControl`を使用
- iOS標準のプルトゥリフレッシュ動作
- リフレッシュ時にデータを再読み込み

使用時の注意点：

1. インジケーターのサイズ
```dart
CupertinoActivityIndicator(
  radius: 15,  // デフォルトは10
  color: CupertinoColors.white,  // 色の変更も可能
)
```

2. 状態管理
```dart
bool _isLoading = true;  // ローディング状態の管理
// メモリリーク防止
if (mounted) {
  setState(() {
    _isLoading = false;
  });
}
```

3. エラーハンドリング
```dart
try {
  // データ取得処理
} catch (e) {
  // エラー処理
} finally {
  setState(() {
    _isLoading = false;
  });
}
```

このように、iOSのローディングインジケーターは様々なユースケースで使用され、ユーザーに処理中であることを適切に伝えることができます。